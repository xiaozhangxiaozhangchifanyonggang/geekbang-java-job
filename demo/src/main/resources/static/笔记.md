# Java进阶笔记

## 1.Java字节码笔记

Java bytecode由单字节(code)的指令组成，理论上最多支持256个操作码(opcode)。实际上Java只是用了200左右的操作码，还有一些操作码则保留给调试操作

**根据指令的性质，主要分为四个大类**

1. 栈操作指令
2. 程序流程控制指令
3. 对象操作指令，包括方法调用指令
4. 算术运算以及类型转换指令

javap命令可以查看一个编译好的class文件内部的字节码结构


要一次读取多个字节时，经常用到InputStream.available()方法，
这个方法可以在读写操作前先得知数据流里有多少个字节可以读取。
需要注意的是，如果这个方法用在从本地文件读取数据时，一般不会遇到问题，但如果是用于网络操作，就经常会遇到一些麻烦。
比如，Socket通讯时，对方明明发来了1000个字节，但是自己的程序调用available()方法却只得到900，或者100，甚至是0，
感觉有点莫名其妙，怎么也找不到原因。其实，这是因为网络通讯往往是间断性的，一串字节往往分几批进行发送。
本地程序调用available()方法有时得到0，这可能是对方还没有响应，也可能是对方已经响应了，但是数据还没有送达本地。
对方发送了1000个字节给你，也许分成3批到达，这你就要调用3次available()方法才能将数据总数全部得到。
若想获取网络中流的总大小，可以借助URLConnection方法
URLConnection openConnection = new URL("http://www.apache.org").openConnection();
System.out.println(openConnection.getContentLength());
